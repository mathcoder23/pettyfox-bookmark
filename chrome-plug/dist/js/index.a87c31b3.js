(function(t){function e(e){for(var r,o,c=e[0],s=e[1],u=e[2],f=0,m=[];f<c.length;f++)o=c[f],Object.prototype.hasOwnProperty.call(a,o)&&a[o]&&m.push(a[o][0]),a[o]=0;for(r in s)Object.prototype.hasOwnProperty.call(s,r)&&(t[r]=s[r]);l&&l(e);while(m.length)m.shift()();return i.push.apply(i,u||[]),n()}function n(){for(var t,e=0;e<i.length;e++){for(var n=i[e],r=!0,c=1;c<n.length;c++){var s=n[c];0!==a[s]&&(r=!1)}r&&(i.splice(e--,1),t=o(o.s=n[0]))}return t}var r={},a={index:0},i=[];function o(e){if(r[e])return r[e].exports;var n=r[e]={i:e,l:!1,exports:{}};return t[e].call(n.exports,n,n.exports,o),n.l=!0,n.exports}o.m=t,o.c=r,o.d=function(t,e,n){o.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},o.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},o.t=function(t,e){if(1&e&&(t=o(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(o.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var r in t)o.d(n,r,function(e){return t[e]}.bind(null,r));return n},o.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return o.d(e,"a",e),e},o.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},o.p="";var c=window["webpackJsonp"]=window["webpackJsonp"]||[],s=c.push.bind(c);c.push=e,c=c.slice();for(var u=0;u<c.length;u++)e(c[u]);var l=s;i.push([0,"chunk-vendors"]),n()})({0:function(t,e,n){t.exports=n("1e62")},"0df1":function(t,e){},1756:function(t,e,n){},"1e62":function(t,e,n){"use strict";n.r(e);n("e260"),n("e6cf"),n("cca6"),n("a79d");var r=n("2b0e"),a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{attrs:{id:"app"}},[n("default-app")],1)},i=[],o=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("home")},c=[],s=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{on:{click:function(e){t.menuVisible=!1}}},[n("bookmark-edit-dialog",{ref:"dialog",on:{update:t.updateList}}),n("bookmark-index-dialog",{ref:"indexDialog"}),n("div",{staticStyle:{display:"flex","justify-content":"flex-end"}},[n("span",[t._v(t._s(t.baseUrl))]),n("el-button",{on:{click:t.clickResetIndex}},[t._v("重建索引")]),n("el-button",{on:{click:t.clickConfig}},[t._v("配置服务器")])],1),n("div",{staticClass:"search search--open"},[n("form",{staticClass:"search__form",attrs:{action:""}},[n("el-autocomplete",{staticClass:"search__input",attrs:{clearable:"",autofocus:"autofocus","fetch-suggestions":t.querySearchAsync,placeholder:"Search"},on:{select:t.handleSelect},model:{value:t.search,callback:function(e){t.search=e},expression:"search"}})],1)]),n("div",{staticStyle:{"margin-left":"60px"}},[n("div",{staticClass:"list"},[0===this.search.length?n("div",{staticClass:"item",on:{click:t.clickCreate}},[n("div",{staticClass:"item-plus"},[t._v(" + ")])]):t._e(),t._l(t.list,(function(e){return n("div",{staticClass:"item",on:{click:function(n){return t.clickItem(e)},contextmenu:function(n){return n.preventDefault(),t.openMenu(n,e)}}},[e.name.length>0?n("el-tooltip",{staticClass:"item-name",attrs:{effect:"dark",content:e.name,placement:"right"}},[n("div",{staticClass:"item-name"},[n("span",[t._v(t._s(t.formatText(e.name)))])])]):t._e(),e.desc.length>0?n("el-tooltip",{staticClass:"item-desc",attrs:{effect:"dark",content:e.desc,placement:"right"}},[n("div",{staticClass:"item-desc"},[t._v(t._s(t.formatText(e.desc,20)))])]):t._e()],1)}))],2)]),t.menuVisible?n("div",{staticClass:"menu",style:t.menuStyle,attrs:{id:"contextmenu"}},[n("div",{staticClass:"contextmenu__item",on:{click:function(e){return t.clickEdit(t.currentItem)}}},[t._v("编辑 ")]),n("div",{staticClass:"contextmenu__item",on:{click:function(e){return t.clickRemove(t.currentItem)}}},[t._v("删除 ")]),n("div",{staticClass:"contextmenu__item",on:{click:function(e){return t.clickGetIndex(t.currentItem)}}},[t._v("查看索引 ")])]):t._e()],1)},u=[],l=n("b85c"),f=n("1da1"),m=n("ade3"),d=(n("96cf"),n("ac1f"),n("841c"),function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("el-dialog",{attrs:{visible:t.visible},on:{close:function(e){t.visible=!1}}},[n("bookmark-edit",{ref:"edit",on:{close:function(e){t.visible=!1},update:function(e){return t.$emit("update")}}})],1)}),p=[],h=n("768c"),v={name:"BookmarkEditDialog",components:{BookmarkEdit:h["a"]},data:function(){return{visible:!1,form:{}}},methods:{open:function(t){var e=this;this.form=t,this.visible=!0,this.$nextTick((function(){e.$refs.edit.loadForm(e.form)}))}}},g=v,b=n("2877"),k=Object(b["a"])(g,d,p,!1,null,"381c263a",null),x=k.exports,y=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("el-dialog",{attrs:{visible:t.visible},on:{close:function(e){t.visible=!1}}},[t.data.desc?n("div",{staticClass:"tag-list"},[n("sapn",{staticClass:"title"},[t._v("书签描述:")]),t._l(t.data.desc,(function(e){return n("div",{staticClass:"item"},[n("el-tag",[t._v(t._s(e))])],1)}))],2):t._e(),t.data.name?n("div",{staticClass:"tag-list"},[n("sapn",{staticClass:"title"},[t._v("书签标题:")]),t._l(t.data.name,(function(e){return n("div",{staticClass:"item"},[n("el-tag",[t._v(t._s(e))])],1)}))],2):t._e(),t.data.url?n("div",{staticClass:"tag-list"},[n("sapn",{staticClass:"title"},[t._v("书签地址:")]),t._l(t.data.url,(function(e){return n("div",{staticClass:"item"},[n("el-tag",[t._v(t._s(e))])],1)}))],2):t._e()])},_=[],w={name:"BookmarkIndexDialog",components:{},data:function(){return{visible:!1,form:{},data:{}}},methods:{batchCreate:function(){for(var t in temp.data.iconDict){var e=temp.data.iconDict[t],n={name:e.label,url:e.url,desc:e.desc};this.$api.BookmarkApi.save(n)}},open:function(t){var e=this;return Object(f["a"])(regeneratorRuntime.mark((function n(){var r;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return e.visible=!0,n.next=3,e.$api.BookmarkApi.getIndex({id:t});case 3:r=n.sent,console.log("rep",r),200===r.code?e.data=r.data:e.$message.warning(r.msg);case 6:case"end":return n.stop()}}),n)})))()}}},$=w,j=(n("704c"),Object(b["a"])($,y,_,!1,null,"46d4f5ee",null)),O=j.exports,S=n("55c9"),C={name:"Home",components:{BookmarkIndexDialog:O,BookmarkEditDialog:x},data:function(){return Object(m["a"])({menuStyle:{},currentItem:null,menuVisible:!1,baseUrl:"http://localhost:8080",message:"Hello Vue!",search:"",currentSelect:{},form:{},menuList:[{name:"首页"},{name:"Home"},{name:"个人"}],list:[]},"baseUrl","")},mounted:function(){this.updateList(),this.baseUrl=localStorage.getItem("baseUrl")},methods:{clearSearch:function(){console.log("clear search"),this.search=""},formatText:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:15;return t?t.length>e?t.substring(0,e)+"...":t.substring(0,t.length):""},clickGetIndex:function(){this.$refs.indexDialog.open(this.currentItem.id)},updateList:function(){var t=this;return Object(f["a"])(regeneratorRuntime.mark((function e(){var n,r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(0!==t.search.length){e.next=7;break}return e.next=3,t.$api.BookmarkApi.list();case 3:n=e.sent,t.list=n.data,e.next=11;break;case 7:return e.next=9,t.$api.BookmarkApi.search({keyword:t.search});case 9:r=e.sent,t.list=r.data;case 11:case"end":return e.stop()}}),e)})))()},querySearchAsync:function(t,e){var n=this;return Object(f["a"])(regeneratorRuntime.mark((function t(){var r,a,i,o,c;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(0!==n.search.length){t.next=3;break}return e([]),t.abrupt("return");case 3:return t.next=5,n.$api.BookmarkApi.searchSuggest({keyword:n.search});case 5:if(r=t.sent,a=[],r.data&&r.data.length>0){i=Object(l["a"])(r.data);try{for(i.s();!(o=i.n()).done;)c=o.value,a.push({value:c})}catch(s){i.e(s)}finally{i.f()}}console.log("sss",a),e(a);case 10:case"end":return t.stop()}}),t)})))()},handleSelect:function(t){console.log(t)},clickItem:function(t){window.open(t.url)},clickEdit:function(t){this.$refs.dialog.open(t)},clickRemove:function(t){var e=this;this.$confirm("确认要删除此书签","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){e.$api.BookmarkApi.remove({ids:[t.id]}).then((function(t){200===t.code?(e.$message.success("删除成功"),e.updateList()):e.$message.error(t.msg)}))})).catch((function(){}))},clickConfig:function(){var t=this;this.$prompt("请输入服务器地址","提示",{confirmButtonText:"确定",cancelButtonText:"取消"}).then((function(e){var n=e.value;S["a"].init(n),t.$message.success("新地址：",+n),localStorage.setItem("baseUrl",n)})).catch((function(){}))},clickResetIndex:function(t){var e=this;this.$confirm("确定要重建索引吗","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){e.$api.BookmarkApi.resetIndex({ids:[t.id]}).then((function(t){200===t.code?(e.$message.success("索引重建成功"),e.updateList()):e.$message.error(t.msg)}))})).catch((function(){}))},clickMenu:function(t){this.currentSelect=t},openMenu:function(t,e){console.log(t,e),this.menuStyle={left:t.x+"px",top:t.y+"px"},this.currentItem=e,this.menuVisible=!0},clickCreate:function(){this.$refs.dialog.open({})}},watch:{search:function(){this.updateList()}}},I=C,B=(n("cccb"),Object(b["a"])(I,s,u,!1,null,null,null)),P=B.exports,A={name:"DefaultApp",components:{Home:P},mounted:function(){}},E=A,R=Object(b["a"])(E,o,c,!1,null,"386158fe",null),T=R.exports,D={name:"App",components:{DefaultApp:T},mounted:function(){}},L=D,U=Object(b["a"])(L,a,i,!1,null,null,null),M=U.exports;n("6793"),n("4f5c"),n("0df1");r["default"].config.productionTip=!1,new r["default"]({render:function(t){return t(M)}}).$mount("#app")},"4f5c":function(t,e,n){"use strict";var r=n("2b0e"),a=n("55c9"),i={list:function(){return a["a"].apiList("/bookmark/list")},search:function(t){return a["a"].apiList("/bookmark/search",t)},resetIndex:function(t){return a["a"].apiPost("/bookmark/resetIndex",t)},getIndex:function(t){return a["a"].apiGet("/bookmark/getIndex",t)},searchSuggest:function(t){return a["a"].apiList("/bookmark/searchSuggest",t)},save:function(t){return a["a"].apiPost("/bookmark/save",t)},remove:function(t){return a["a"].apiPost("/bookmark/remove",t)}},o=localStorage.getItem("baseUrl");o||(o="http://localhost:10004"),a["a"].init(o);var c={BookmarkApi:i};r["default"].prototype.$api=c},"55c9":function(t,e,n){"use strict";n.d(e,"a",(function(){return x}));var r=n("53ca"),a=(n("ac1f"),n("466d"),n("d3b7"),n("bc3a")),i=n.n(a),o=n("b85c"),c=(n("5319"),n("4d63"),n("25f0"),n("498a"),n("b64b"),{format:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";if(arguments.length<=1)return t;for(var e=arguments[0],n=1;n<arguments.length;n++)e=e.replace(new RegExp("\\{"+(n-1)+"\\}","g"),arguments[n]);return e},trimSubmit:function(t){if("string"===typeof t)return t.trim();if("object"===Object(r["a"])(t)){for(var e=Object.keys(t),n=0,a=e;n<a.length;n++){var i=a[n];0!==i.indexOf("_")&&0!==i.indexOf("$")||delete t[i]}for(var o in t)"undefined"===typeof t[o]?delete t[o]:"string"===typeof t[o]&&(t[o]=t[o].trim(),0!==t[o].length&&"undefined"!==t[o]||delete t[o])}return t},stream2mapStr:function(t,e){var n="";if(t instanceof Array){var r,a=Object(o["a"])(t);try{for(a.s();!(r=a.n()).done;){var i=r.value;n+=e(i)}}catch(c){a.e(c)}finally{a.f()}n=n.substr(0,n.length-1)}return n},getArrayObjectItem:function(t,e,n){if(t)for(var r in t)if(t[r][e]===n)return t[r];return{}},isNotBlank:function(t){return"string"===typeof t&&t.trim().length>0}}),s=null,u=null,l="",f=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n="";if("object"===Object(r["a"])(t)){n=0===e?"?":"";var a=0;for(var i in t)"number"!==typeof t[i]&&"boolean"!==typeof t[i]&&"string"!==typeof t[i]||(0===a?(a++,n+=i+"="+t[i]):n+="&"+i+"="+t[i])}return n};var m=function(t){l=t,u=i.a,null==u&&console.error("请配置axios"),s=u.create({baseURL:l,timeout:3e4}),s.interceptors.request.use((function(t){return console.log("request",t),t}),(function(t){return Promise.reject(t)})),s.interceptors.response.use((function(t){return console.log("response",t),t.data}),(function(t){return Promise.reject(new Error(t))}))},d=function(t,e,n){return new Promise((function(r,a){var i={method:"post"};i.url="string"===typeof t?t:t.uri,i.params=n,i.data=e,i.meta=Object.assign({flag:"apiPost"},t.meta),s(i).then((function(t){return r(t)})).catch((function(t){a(t)}))}))},p=function(t){return t.data&&(t.data=c.trimSubmit(t.data)),t.params&&(t.params=c.trimSubmit(t.params)),s(t)},h=function(t,e,n){return new Promise((function(r,a){var i={method:"post"};i.url="string"===typeof t?t:t.uri,i.params=n,i.data=f(e,1),i.meta=Object.assign({flag:"apiPost"},t.meta),i.headers={"Content-Type":"application/x-www-form-urlencoded"},s(i).then((function(t){return r(t)})).catch((function(t){a(t)}))}))},v=function(t,e,n){return new Promise((function(r,a){var i={method:"put"};i.url="string"===typeof t?t:t.uri,i.url=i.url+f(e),i.data=n,i.params=e,s(i).then((function(t){return r(t)})).catch((function(t){a(t)}))}))},g=function(t,e,n){return new Promise((function(r,a){var i={method:"delete"};i.url="string"===typeof t?t:t.uri,i.url=i.url+f(e),i.data=n,i.params=e,s(i).then((function(t){return r(t)})).catch((function(t){a(t)}))}))},b=function(t,e){return new Promise((function(n,r){var a={method:"get"};a.url="string"===typeof t?t:t.uri,a.params=e,s(a).then((function(t){return n(t)})).catch((function(t){r(t)}))}))},k=function(t,e){return new Promise((function(n,r){var a={method:"get"};a.url="string"===typeof t?t:t.uri,a.params=e,s(a).then((function(t){return n(t)})).catch((function(t){r(t)}))}))},x={init:m,apiList:k,apiGet:b,apiFormPost:h,apiPost:d,apiRequest:p,apiPut:v,apiDel:g}},"5ced":function(t,e,n){},6793:function(t,e,n){"use strict";var r=n("2b0e"),a=n("5c96"),i=n.n(a);n("26af");r["default"].use(i.a)},"704c":function(t,e,n){"use strict";n("1756")},"768c":function(t,e,n){"use strict";var r=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("el-form",{ref:"form",attrs:{model:t.form,"label-width":"80px"}},[n("el-form-item",{attrs:{label:"标题"}},[n("el-input",{model:{value:t.form.name,callback:function(e){t.$set(t.form,"name",e)},expression:"form.name"}})],1),n("el-form-item",{attrs:{label:"书签分组"}},[n("el-select",{attrs:{disabled:"",placeholder:"请选择标签分组"},model:{value:t.form.region,callback:function(e){t.$set(t.form,"region",e)},expression:"form.region"}},[n("el-option",{attrs:{label:"分组1",value:"shanghai"}})],1)],1),n("el-form-item",{attrs:{label:"书签地址"}},[n("el-input",{model:{value:t.form.url,callback:function(e){t.$set(t.form,"url",e)},expression:"form.url"}})],1),n("el-form-item",{attrs:{label:"描述"}},[n("el-input",{attrs:{type:"textarea"},model:{value:t.form.desc,callback:function(e){t.$set(t.form,"desc",e)},expression:"form.desc"}})],1),n("el-form-item",[n("el-button",{on:{click:t.handleSubmit}},[t._v("保存")]),n("el-button",{on:{click:function(e){return t.$emit("close")}}},[t._v("取消")])],1)],1)},a=[],i=n("b85c"),o=n("53ca"),c=(n("ac1f"),n("5319"),n("4d63"),n("25f0"),n("498a"),n("b64b"),{format:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";if(arguments.length<=1)return t;for(var e=arguments[0],n=1;n<arguments.length;n++)e=e.replace(new RegExp("\\{"+(n-1)+"\\}","g"),arguments[n]);return e},trimSubmit:function(t){if("string"===typeof t)return t.trim();if("object"===Object(o["a"])(t)){for(var e=Object.keys(t),n=0,r=e;n<r.length;n++){var a=r[n];0!==a.indexOf("_")&&0!==a.indexOf("$")||delete t[a]}for(var i in t)"undefined"===typeof t[i]?delete t[i]:"string"===typeof t[i]&&(t[i]=t[i].trim(),0!==t[i].length&&"undefined"!==t[i]||delete t[i])}return t},stream2mapStr:function(t,e){var n="";if(t instanceof Array){var r,a=Object(i["a"])(t);try{for(a.s();!(r=a.n()).done;){var o=r.value;n+=e(o)}}catch(c){a.e(c)}finally{a.f()}n=n.substr(0,n.length-1)}return n},getArrayObjectItem:function(t,e,n){if(t)for(var r in t)if(t[r][e]===n)return t[r];return{}},isNotBlank:function(t){return"string"===typeof t&&t.trim().length>0}}),s={name:"BookmarkEdit",data:function(){return{form:{}}},methods:{loadForm:function(t){this.form=Object.assign({},this.form,t)},handleSubmit:function(){var t=this;c.isNotBlank(this.form.url)?this.$api.BookmarkApi.save(this.form).then((function(e){200===e.code?(t.$emit("close"),t.$emit("update")):t.$message.warning(e.msg)})):this.$message("请输入书签地址")}}},u=s,l=n("2877"),f=Object(l["a"])(u,r,a,!1,null,"6145bac9",null);e["a"]=f.exports},cccb:function(t,e,n){"use strict";n("5ced")}});
//# sourceMappingURL=index.a87c31b3.js.map